<!DOCTYPE html>
<html>
	<head>
		<title>Vizzu library test</title>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1">
	</head>
<body>
	<noscript>
		<p class="noscript">To use Vizzu, please enable Javascript.</p>
	</noscript>

	<div>
		<input type="range" min="1" max="1000" step="1" value="0" id="myRange" style="width: 640px">
	</div>

	<!--
	Resizable
	<div id="testVizzuCanvasPlaceholder" style="width:100%; height:100%;"></div>
	Fixed size
	<div id="testVizzuCanvasPlaceholder" style="width:640px; height:640px;"></div>
	-->

	<div id="testVizzuCanvasPlaceholder" style="width:640px; height:360px;"></div>

	<script type="module">

		import Vizzu from './scripts/interface.js';

		function onLoaded()
		{
			let data = {
					series: [
						{
							name: 'Colors',
							type: 'categories',
							values: ['red', 'green', 'blue']
						},
						{
							name: 'Val',
							type: 'values',
							values: [ 3, 5, 4 ]
						}
					]
				};

			chart.animate(
			{
				data: data,
				descriptor : {
					channels: {
						x: { attach: [ 'Colors'] },
					},
					title: null,
					legend: null,
				}
			}).then(() =>
				chart.animate({
					descriptor : {
						channels: {
							x: { detach: [ 'Colors'] },
							y: { attach: [ 'Colors' ]}
						},
					}
				})
			).then(() =>
				chart.animate({
					descriptor : {
						channels: {
							color: { attach: [ 'Colors' ]}
						}
					}
				})
			).then(() =>
				chart.animate({
					descriptor : {
						channels: {
							color: { detach: [ 'Colors' ]},
							lightness: { attach: [ 'Colors' ]}
						}
					}
				})
			).then(() =>
				chart.animate({
					descriptor : {
						channels: {
							lightness: { detach: [ 'Colors' ]},
							label: { attach: [ 'Colors' ]}
						}
					}
				})
			)
			.catch((err) =>
			{
				console.log(err);
			});
		}

		let slider = document.getElementById("myRange");
		let chart = new Vizzu('testVizzuCanvasPlaceholder', onLoaded);

		slider.oninput = (e)=>
		{
			let t = e.target.value;
			chart.animation.pause();
			chart.animation.seek(t/10 + '%');
		};

</script>
</body>
</html>